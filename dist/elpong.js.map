{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap c377f7e702fa31533c3d","webpack:///./src/Errors.ts","webpack:///./src/Util.ts","webpack:///./src/Helpers/CollectionHelper.ts","webpack:///./src/Ajax.ts","webpack:///./src/Element.ts","webpack:///./src/Helpers/SchemeHelper.ts","webpack:///./src/Helpers/UrlHelper.ts","webpack:///./src/Elpong.ts","webpack:///./src/Helpers.ts","webpack:///./src/Helpers/Element/Fields/EmbeddedCollection.ts","webpack:///./src/Helpers/Element/Fields/EmbeddedElement.ts","webpack:///./src/Helpers/Element/Relations/HasMany.ts","webpack:///./src/Helpers/ElementHelper.ts","webpack:///./src/Collection.ts","webpack:///./src/Configuration.ts","webpack:///./src/Helpers/Collection/Actions.ts","webpack:///./src/Helpers/Element/Actions.ts","webpack:///./src/Helpers/Element/Fields.ts","webpack:///./src/Helpers/Element/Relations.ts","webpack:///./src/Helpers/Element/Relations/BelongsTo.ts","webpack:///./src/Helpers/Element/Relations/HasOne.ts","webpack:///./src/Helpers/Element/Snapshots.ts","webpack:///./src/Scheme.ts","webpack:///./src/Snapshot.ts","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"elpong.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Elpong\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Elpong\"] = factory();\n\telse\n\t\troot[\"Elpong\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c377f7e702fa31533c3d","declare var DEBUG: boolean;\nif (typeof DEBUG === 'undefined') {\n  var DEBUG = true;\n}\n\nif (DEBUG) {\n  var error_text_map: Object = {\n    'schmnf': 'Scheme not found',\n    'collnf': 'Collection not found',\n    'collnf:s': 'Collection not found by singular name',\n    'collex': 'Collection with name already exists in scheme',\n    'elpgns': 'No scheme tags found',\n    'elpnce': 'No collection or element tags found',\n    'confns': 'Configuration has no selector',\n    'confnn': 'Configuration has no name',\n    'elenew': 'Element is new',\n    'elesna': 'Element has a selector value but is in new_elements array',\n    'elense': 'Element has no selector value but is in elements object',\n    'apinur': 'Api url has not yet been set',\n    'fldnsa': 'Field should be an array of selectors',\n    'elesch': 'Element selector changed',\n    'elesnf': 'Snapshot not found',\n    'elesti': 'Invalid snapshot identifier: must be number <= list.length, string or RegExp',\n    'eleafw': 'Pre element has an associated field that does not match the embedded element selector',\n    'elesnm': 'Selector is not matching get one request selector'\n  }\n}\n\nexport class ElpongError extends Error {\n  constructor(message: string, argument?: string) {\n    let actual_message = DEBUG ? error_text_map[message] : message;\n    if (argument) {\n      super(`${actual_message}: ${argument}`);\n    }\n    else {\n      super(actual_message);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Errors.ts","import { FutureString, FutureArrayConstructor } from './Interfaces'\n\nexport const Util = {\n  // BREAK: new Object(),\n  // kebab: (string: string): string => {\n  //   return string.toLowerCase().replace(/[&\\/\\\\#,+()$~%.'\":*?<>{}]/g, '').replace(/(|)/g, 'e').split(' ').join('-');\n  // },\n  capitalize: (string: string): string => {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  },\n  camelize: (string: string): string => {\n    return string.replace(/_/g, ' ').replace(/(?:^\\w|[A-Z]|\\b\\w)/g, function(letter: string, index: number) {\n      if (index === 0) { return letter.toLowerCase(); } else { return letter.toUpperCase(); }\n    }).replace(/\\s+/g, '');\n  },\n  // arrayDiff: (array1: any[], array2: any[]): any[] => {\n  //   return array1.filter(i => array2.indexOf(i) < 0);\n  // },\n  removeFromArray: (array: any[], element: any): boolean => {\n    let i = array.indexOf(element);\n    if (i === -1) {\n      return false;\n    } else {\n      array.splice(i, i + 1);\n      return true;\n    }\n  },\n  // copy: (obj: Object) => {\n  //   if (typeof obj !== 'object') {\n  //     return obj;\n  //   }\n  //   let copy = obj.constructor();\n  //   for (let attr in obj) {\n  //     if (obj.hasOwnProperty(attr)) {\n  //       copy[attr] = obj[attr];\n  //     }\n  //   }\n  //   return copy;\n  // },\n  // merge: (obj1: Object, obj2: Object): Object => {\n  //   for (let attr in obj2) {\n  //     obj1[attr] = obj2[attr];\n  //   }\n  //   return obj1;\n  // },\n  isInteger: (value: any): value is number => {\n    return value === parseInt(value, 10);\n  },\n  isNumber: (value: any): value is number => {\n    return isFinite(value) && !isNaN(parseFloat(value));\n  },\n  isString: (value: any): value is string => {\n    return typeof value === 'string';\n  },\n  isRegExp: (value: any): value is RegExp => {\n    return Object.prototype.toString.call(value) == '[object RegExp]';\n  },\n  forEach: (o: Object, fn: (v: any, k: string) => void): void => {\n    for (let k in o) {\n      if (!o.hasOwnProperty(k)) { continue; }\n      let v = o[k];\n      fn(v, k)\n      // if (f(v, k) === Util.BREAK) {\n      //   break;\n      // }\n    }\n  },\n  // reverseForEach: (obj: Object, f: (k: string, v: any) => void): void => {\n  //   let arr: string[] = [];\n  //   let _break = false;\n  //   for (let key in obj) {\n  //     // add hasOwnPropertyCheck if needed\n  //     arr.push(key);\n  //   }\n  //   let i = arr.length - 1;\n  //   while ((i >= 0) && !_break) {\n  //     let v = f.call(obj, arr[i], obj[arr[i]]);\n  //     if (v === Util.BREAK) { _break = true; }\n  //     i--;\n  //   }\n  // },\n  endsWith: (string: string, search: string): boolean => {\n    if ((string as any as FutureString).endsWith) {\n      return (string as any as FutureString).endsWith(search);\n    } else {\n      return string.substr(-search.length) === search;\n    }\n  },\n  startsWith: (string: string, search: string): boolean => {\n    if ((string as any as FutureString).startsWith) {\n      return (string as any as FutureString).startsWith(search);\n    } else {\n      return string.substr(0, search.length) === search;\n    }\n  },\n  arrayFromHTML: (node_list: NodeListOf<HTMLElement>): Array<HTMLElement> => {\n    if ((Array as any as FutureArrayConstructor).from) {\n      return (Array as any as FutureArrayConstructor).from(node_list);\n    }\n    else {\n      return [].slice.call(node_list);\n    }\n  },\n  values: (obj: Object): any[] => {\n    let vals: any[] = [];\n\t\tfor (let key in obj) {\n\t\t\tif (obj.hasOwnProperty(key) && obj.propertyIsEnumerable(key)) {\n\t\t\t\tvals.push(obj[key]);\n\t\t\t}\n\t\t}\n\t\treturn vals;\n  },\n  includes: (a: any[], b: any): boolean => {\n\t  return a.indexOf(b) > -1;\n  },\n  equalsJSON: (a: any, b: any): boolean => {\n    for (let k in a) {\n      let v1 = a[k];\n      let v2 = b[k];\n      if (typeof v1 === 'object') {\n        if (!Util.equalsJSON(v1, v2)) {\n          return false;\n        }\n      } else {\n        if (v1 !== v2) {\n          return false;\n        }\n      }\n    }\n    return true;\n  },\n  copyJSON: (o: any): any => {\n    return JSON.parse(JSON.stringify(o));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Util.ts","import { Element } from '../Element';\nimport { Collection } from '../Collection';\nimport { CollectionConfiguration } from '../Configuration';\n\nexport namespace CollectionHelper {\n  export function getConfiguration(collection: Collection): CollectionConfiguration {\n    return collection.scheme().configuration().collections[collection.name];\n  }\n  export function getSingularName(collection: Collection): string {\n    return getConfiguration(collection).singular; // Last char cut in Configuration\n  }\n  export function addElement(collection: Collection, element: Element): void {\n    let selector_value;\n    if (selector_value = element.selector()) {\n      collection.elements[selector_value] = element;\n    } else {\n      collection.new_elements.push(element);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/CollectionHelper.ts","// export interface AjaxPromise extends Promise<any> {\n// }\n\ntype AjaxPromiseThenOnResolveFunction = (response: AjaxResponse) => void;\ntype AjaxPromiseThenFunction = (resolve_fn: AjaxPromiseThenOnResolveFunction) => void;\n\nexport interface AjaxPromise {\n  then: AjaxPromiseThenFunction;\n} //Promise<any> //|JQueryPromise<{}>;\n\nexport interface AjaxResponse extends Response {\n  data: any;\n}\n\nexport type AjaxFunction = (url: string, instruction: AjaxInstruction) => AjaxPromise;\n\nexport interface AjaxObject {\n  data: Object;\n}\n\nexport interface AjaxInstruction {\n  data: Object;\n  method: string;\n  headers: Object;\n  [prop: string]: any;\n}\n\nexport interface AjaxData {\n  [key: string]: any;\n}\n\nexport interface AjaxHeaders {\n  [name: string]: string;\n}\n\nexport namespace Ajax {\n  let ajax_function: AjaxFunction;\n\n  interface AjaxFunctionOptions {\n    method: string;\n    type: string;\n    url: string;\n    data: string;\n    body: string;\n    headers: AjaxHeaders;\n    dataType: 'json';\n    responseType: 'json';\n  }\n\n  export function executeRequest(url: string, method: string, data?: AjaxData, headers?: AjaxHeaders) {\n    if (!headers) { headers = {}; }\n    headers['Accept'] = headers['Content-Type'] = 'application/json';\n    let options: AjaxFunctionOptions = {\n      method: method,\n      url: url,\n      data: JSON.stringify(data === undefined ? {} : data),\n      headers: headers,\n      dataType: 'json',\n      responseType: 'json'\n    } as AjaxFunctionOptions;\n    options.type = options.method;\n    options.body = options.data;\n    return ajax_function(options.url, options);\n  }\n\n  // Set the http function used for requests\n  // The function should accept one object with keys\n  // method, url, params, headers\n  // and return a promise-like object\n  // with then and catch\n  //\n  // @note Like $http or jQuery.ajax\n  // @param {Function} fn The function.\n  // @param {string} type The function.\n  export function setAjaxFunction(fn: Function, type?: string) {\n    if (typeof type === 'undefined') {\n      if ((typeof jQuery !== 'undefined') && (fn === jQuery.ajax))\n        type = 'jquery';\n      else if ((typeof fetch !== 'undefined') && (fn === fetch))\n        type = 'fetch';\n    }\n\n    switch (type) {\n      case 'jquery':\n        ajax_function = function(url: string, instruction: AjaxInstruction) {\n          let deferred = jQuery.Deferred();\n          let ajax = fn(url, instruction);\n          ajax.then((data: any, status: any, jqxhr: any) => deferred.resolve({data, status: jqxhr.statusCode().status, headers: jqxhr.getAllResponseHeaders()}));\n          ajax.catch((data: any, status: any, jqxhr: any) => deferred.reject({data, status: jqxhr.statusCode().status, headers: jqxhr.getAllResponseHeaders()}));\n          return deferred.promise();\n        }\n        break;\n      case 'fetch':\n        ajax_function = (url: string, instruction: AjaxInstruction) => {\n          return new Promise(function(resolve, reject) {\n            instruction['body'] = instruction.data;\n            let http_promise = fn(url, instruction) as Promise<Response>;\n            http_promise.then(function(response: Response) {\n              if (response.headers.get('content-type') !== 'application/json') {\n                resolve(response);\n              } else {\n                let json_promise = response.json();\n                json_promise.then(function(json: string) {\n                  response['data'] = json; // typescript ignores square brackets\n                  resolve(response);\n                });\n                json_promise.catch(reject);\n              }\n            });\n            http_promise.catch(reject);\n          });\n        }\n        break;\n      default:\n        ajax_function = (url: string, instruction: AjaxInstruction) => fn(instruction);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Ajax.ts","import { Collection } from './Collection';\nimport { PreElement } from './PreElement';\nimport { Util } from './Util';\nimport { AjaxPromise } from './Ajax';\nimport { Snapshot } from './Snapshot';\n\nimport { Fields } from './Helpers/Element/Fields';\nimport { Relations } from './Helpers/Element/Relations';\nimport { Actions, ActionOptions } from './Helpers/Element/Actions';\nimport { Snapshots } from './Helpers/Element/Snapshots';\n\nimport { EmbeddedElement } from './Helpers/Element/Fields/EmbeddedElement';\nimport { EmbeddedCollection } from './Helpers/Element/Fields/EmbeddedCollection';\n\nimport { ElpongError } from './Errors';\nimport { FieldConfiguration, EmbeddedElementFieldConfiguration, EmbeddedCollectionFieldConfiguration } from './Configuration';\n\nexport type SelectorValue = string|number;\n\nexport function isSelectorValue(v: any): v is SelectorValue {\n  return (!!v || v === 0 || v === '') && (typeof v === 'string' || typeof v === 'number');\n}\n\ninterface Fields {\n  [field_key: string]: any;\n}\n\ntype RelationFunction = () => Element|Element[]|null|undefined;\n\ninterface Relations {\n  [relation_function_name: string]: RelationFunction;\n}\n\ntype ActionFunction = (action_options?: ActionOptions) => AjaxPromise;\n\ninterface Actions {\n  get: ActionFunction;\n  post: ActionFunction;\n  put: ActionFunction;\n  delete: ActionFunction;\n  [action_name: string]: ActionFunction;\n}\n\ninterface Snapshots {\n  make: Function;\n  list: Snapshot[];\n  current_index: number;\n  undo: (identifier: number|string|RegExp) => Element;\n  lastPersisted: () => Snapshot|undefined;\n  lastWithTag: (tag: string|RegExp) => Snapshot|undefined;\n  last: () => Snapshot|undefined;\n  isPersisted: () => boolean;\n}\n\nexport class Element {\n  readonly _collection: Collection;\n  readonly fields: Fields = {} as Fields;\n  readonly relations: Relations = {} as Relations;\n  readonly actions: Actions = {} as Actions;\n  readonly snapshots: Snapshots = {} as Snapshots;\n\n  constructor(collection: Collection, pre_element: PreElement) {\n    this._collection = collection;\n\n    let collection_config = collection.configuration();\n\n    Fields.setup(this, collection_config.fields, pre_element);\n    Relations.setup(this, collection_config.relations);\n    Actions.setup(this, collection_config.actions);\n    Snapshots.setup(this);\n\n    this.snapshots.make('creation');\n  }\n\n  collection() {\n    return this._collection;\n  }\n\n  selector(): SelectorValue|undefined {\n    return this.fields[this.collection().scheme().configuration().selector];\n  }\n\n  remove() {\n    let selector_value: SelectorValue|undefined;\n    if (selector_value = this.selector()) {\n      return this.actions.delete().then(() => {\n        let elements = this.collection().elements;\n        delete elements[selector_value as SelectorValue];\n      });\n    } else {\n      Util.removeFromArray(this.collection().new_elements, this);\n      return {\n        then: function(fn: Function) { return fn(); },\n        catch: function() {}\n      };\n    }\n  }\n\n  save() {\n    if (this.isNew()) {\n      return this.actions.post();\n    } else {\n      return this.actions.put();\n    }\n  }\n\n  isNew() {\n    if (Util.includes(this.collection().new_elements, this)) {\n      if (this.selector()) {\n        throw new ElpongError('elesna');\n      } else {\n        return true;\n      }\n    } else {\n      if (!this.selector()) {\n        throw new ElpongError('elense');\n      } else {\n        return false;\n      }\n    }\n  }\n\n  merge(pre_element: PreElement) {\n    let collection_config = this.collection().configuration();\n    let selector_key = this.collection().scheme().configuration().selector;\n    Util.forEach(collection_config.fields, (field_config: FieldConfiguration, field_key: string) => {\n      let field_value;\n      if (field_value = pre_element[field_key]) {\n        if (field_config.embedded_element) {\n          EmbeddedElement.handle(this, pre_element, field_key, field_config as EmbeddedElementFieldConfiguration);\n        } else if (field_config.embedded_collection) {\n          EmbeddedCollection.handle(this, pre_element, field_key, field_config as EmbeddedCollectionFieldConfiguration);\n        } else if (field_key === selector_key) {\n          let selector_value = this.fields[field_key];\n          if ((selector_value !== field_value) && isSelectorValue(selector_value) && isSelectorValue(field_value)) {\n            throw new ElpongError('elesch', `${selector_value} -> ${field_value}`);\n          }\n          this.fields[field_key] = field_value;\n        } else {\n          this.fields[field_key] = field_value;\n        }\n      }\n    });\n    return this;\n  }\n\n  // isPersisted() {\n  //   if (this.isNew()) { return false; }\n  //   let { data } = this.snapshots.getLastPersisted();\n  //   let object = HPP.Helpers.Element.getFields(this);\n  //   for (let k in object) {\n  //     let v = object[k];\n  //     if (data[k] !== v) { return false; }\n  //   }\n  //   return true;\n  // }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Element.ts","import { Scheme } from '../Scheme';\nimport { ElpongError } from '../Errors';\nimport { CollectionHelper } from './CollectionHelper';\n\nexport namespace SchemeHelper {\n  export function getCollectionBySingularName(scheme: Scheme, singular_name: string) {\n    for (let collection_name in scheme._collections) {\n      let collection = scheme.select(collection_name);\n      if (CollectionHelper.getSingularName(collection) === singular_name) { return collection; }\n    }\n    throw new ElpongError('collnf:s', singular_name);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/SchemeHelper.ts","import { ActionConfiguration } from '../Configuration';\nimport { Element } from '../Element';\nimport { Collection } from '../Collection';\nimport { ElpongError } from '../Errors';\n\nexport interface UrlOptions {\n  path?: string;\n  suffix?: string;\n}\n\nexport namespace UrlHelper {\n  export function createForElement(action_name: string, action_configuration: ActionConfiguration, element: Element, url_options: UrlOptions, no_selector?: boolean): string {\n    let path, url;\n    let collection = element.collection();\n    let scheme = collection.scheme();\n    let api_url = scheme.getApiUrl();\n    if (!api_url) { throw new ElpongError('apinur'); }\n\n    if (url_options.path) {\n      path = UrlHelper.trimSlashes(url_options.path);\n      url = `${api_url}/${path}`;\n    } else {\n      url = `${api_url}/${collection.name}`;\n      if (!action_configuration.no_selector && !no_selector) {\n        url = `${url}/${element.selector()}`;\n      }\n    }\n\n    if (action_configuration.method) { // is custom action\n      url = `${url}/${action_configuration.path || action_name}`;\n    }\n\n    if (url_options.suffix) { url = `${url}/${url_options.suffix}`; }\n    return url;\n  }\n\n  export function createForCollection(action_name: string, collection: Collection, url_options: UrlOptions): string {\n    let api_url = collection.scheme().getApiUrl();\n    if (!api_url) { throw new ElpongError('apinur'); }\n\n    let url = `${api_url}/${collection.name}`; //HPP.Helpers.Url.createForCollection(, hpe, user_options) # (action_name, element, user_options = {}, suffix)\n    if (url_options.suffix) { url = `${url}/${url_options.suffix}`; }\n    return url;\n  }\n\n  export function trimSlashes(s: string): string {\n    return s.replace(/^\\/|\\/$/g, '');\n  }\n\n  export function isFqdn(s: string): boolean {\n    return /^https?:\\/\\//.test(s);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/UrlHelper.ts","import { Scheme } from './Scheme';\nimport { Collection } from './Collection';\nimport { SchemeConfiguration } from './Configuration';\nimport { ElpongError } from './Errors';\nimport { Util } from './Util';\nimport { Ajax } from './Ajax';\n\ndeclare let DEBUG: boolean;\n\ninterface SchemeMap {\n  [name: string]: Scheme;\n}\n\ninterface CollectionMap {\n  [name: string]: Collection;\n}\n\nlet schemes: SchemeMap = {};\nlet autoload: boolean = false;\n\nexport namespace Elpong {\n  export function add(scheme_config: SchemeConfiguration | Object): Scheme {\n    let scheme = new Scheme(scheme_config);\n    return schemes[scheme.name] = scheme;\n  }\n\n  export function get(name: string): Scheme {\n    let scheme: Scheme;\n    if (scheme = schemes[name]) {\n      return scheme;\n    }\n    throw new ElpongError('schmnf', name); // Scheme not found\n  }\n\n  export function load(ignore_empty: boolean): void {\n    if (typeof document === 'undefined') return\n\n    let scheme_tags: NodeListOf<HTMLMetaElement> =\n      document.querySelectorAll('meta[name=elpong-scheme]') as NodeListOf<HTMLMetaElement>;\n\n    if (!ignore_empty && !scheme_tags.length) {\n      throw new ElpongError('elpgns');\n    }\n\n    for (let scheme_tag of Util.arrayFromHTML(scheme_tags) as HTMLMetaElement[]) {\n      let scheme = Elpong.add(JSON.parse(scheme_tag.content));\n    }\n  }\n\n  export function setAjax(fn: Function): void {\n    Ajax.setAjaxFunction(fn);\n  }\n\n  export function enableAutoload(): void {\n    autoload = true\n    Elpong.load(true);\n  }\n\n  export function isAutoload(): boolean {\n    return autoload;\n  }\n\n  export function tearDown(): void {\n    autoload = false;\n    schemes = {};\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Elpong.ts","export { UrlHelper } from './Helpers/UrlHelper';\nexport { CollectionHelper } from './Helpers/CollectionHelper';\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers.ts","import { Element } from '../../../Element';\nimport { EmbeddedCollectionFieldConfiguration } from '../../../Configuration';\nimport { PreElement } from '../../../PreElement';\nimport { ElpongError } from '../../../Errors';\nimport { Collection } from '../../../Collection';\nimport { Scheme } from '../../../Scheme';\nimport { Util } from '../../../Util';\nimport { CollectionHelper } from '../../CollectionHelper';\n\nexport namespace EmbeddedCollection {\n  export function handle(element: Element, pre_element: PreElement, field_key: string, field_config: EmbeddedCollectionFieldConfiguration): void {\n    let embedded_pre_collection;\n\n    if (!(embedded_pre_collection = pre_element[field_key])) { return; }\n    let collection: Collection = element.collection();\n    let scheme: Scheme = collection.scheme();\n    let embedded_element_collection = scheme.select(field_key || field_config.collection);\n\n    Util.forEach(embedded_pre_collection, function(embedded_pre_element: PreElement) {\n      let embedded_element = new Element(embedded_element_collection, embedded_pre_element);\n      CollectionHelper.addElement(embedded_element_collection, embedded_element);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/Element/Fields/EmbeddedCollection.ts","import { Element } from '../../../Element';\nimport { SchemeHelper } from '../../SchemeHelper';\nimport { EmbeddedElementFieldConfiguration } from '../../../Configuration';\nimport { PreElement } from '../../../PreElement';\nimport { ElpongError } from '../../../Errors';\n\nexport namespace EmbeddedElement {\n  export function handle(element: Element, pre_element: PreElement, field_key: string, field_config: EmbeddedElementFieldConfiguration): void {\n    let embedded_element_collection;\n    let embedded_pre_element = pre_element[field_key];\n    if (!embedded_pre_element) { return; }\n    let collection = element.collection();\n    let scheme = collection.scheme();\n\n    if (field_config.collection) {\n      embedded_element_collection = scheme.select(field_config.collection);\n    } else {\n      embedded_element_collection = SchemeHelper.getCollectionBySingularName(scheme, field_key);\n    }\n\n    let embedded_element = embedded_element_collection.buildOrMerge(embedded_pre_element);\n\n    let associated_field_key = field_config.field || `${field_key}_${scheme.configuration().selector}`;\n\n    let selector_value = embedded_element.selector();\n\n    let associated_field_value = pre_element[associated_field_key];\n    if (associated_field_value && (associated_field_value != selector_value)) {\n      throw new ElpongError('eleafw', `${associated_field_value} != ${selector_value}`);\n    }\n    element.fields[associated_field_key] = selector_value;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/Element/Fields/EmbeddedElement.ts","import { Element } from '../../../Element';\nimport { Collection, CollectionFindByOptions } from '../../../Collection';\nimport { CollectionHelper } from '../../CollectionHelper';\nimport { Util } from '../../../Util';\nimport { HasManyRelationConfiguration, HasOneRelationConfiguration, FieldConfiguration } from '../../../Configuration';\nimport { ElpongError } from '../../../Errors';\n\ntype HasManyRelationFunction = () => Element[];\n\nexport namespace HasMany {\n  export function setup(element: Element, relation_collection_name: string, relation_settings: HasManyRelationConfiguration) {\n    let collection = element.collection();\n    let collection_config = collection.configuration();\n\n    let relation_collection = collection.scheme().select(relation_settings.collection || relation_collection_name);\n\n    // let relation_field_settings: FieldConfiguration;\n    // if (relation_field_settings = collection_config.fields[references_field_key]) {\n    //   // throw new Error(\"Field #{field_key} of collection #{collection.getName()} are not references\") if !relation_field_settings.references\n    //   return element.relations[Util.camelize(relation_collection_name)] = (): Element[] =>\n    //     getHasManyRelationArrayThroughReferencesField(element, relation_collection, references_field_key);\n    //\n    // }\n\n    if (relation_settings.inline) {\n      let references_field_key = relation_settings.inline_field || `${relation_collection_name}_${collection.scheme().configuration().selector}s`; // dogs_ids, unless specified otherwise\n\n      return element.relations[Util.camelize(relation_collection_name)] = (): Element[] =>\n        getHasManyRelationArrayInline(element, relation_collection, references_field_key);\n    } else { // normal has_many relationship\n      return element.relations[Util.camelize(relation_collection_name)] =\n        getHasManyRelationFunction(element, collection, relation_settings, relation_collection);\n    }\n  }\n\n  export function getHasManyRelationFunction(element: Element, collection: Collection, relation_config: HasManyRelationConfiguration|HasOneRelationConfiguration, relation_collection: Collection, limit_to_one?: boolean): HasManyRelationFunction {\n    let has_many_field_key: string;\n    let collection_singular_name = CollectionHelper.getSingularName(collection);\n    let relation_collection_settings = relation_collection.configuration();\n\n    let selector_key = collection.scheme().configuration().selector;\n\n    if (relation_config.polymorphic) {\n      has_many_field_key = `${relation_config.as}_${selector_key}`;\n      let has_many_collection_field_key = `${relation_config.as}_collection`;\n\n      return (): Element[] => getPolymorphicHasManyRelationArray(element, relation_collection, has_many_field_key, has_many_collection_field_key, limit_to_one);\n    } else {\n      if (relation_config.field) {\n        has_many_field_key = relation_config.field;\n      } else if (relation_config.as) {\n        has_many_field_key = `${relation_config.as}_${selector_key}`;\n      } else {\n        has_many_field_key = `${collection_singular_name}_${selector_key}`;\n      }\n      return (): Element[] => getHasManyRelationArray(element, relation_collection, has_many_field_key, limit_to_one);\n    }\n  }\n\n  function getHasManyRelationArray(element: Element, relation_collection: Collection, has_many_field_key: string, limit_to_one?: boolean): Element[] {\n    let element2_arr: Element[] = [];\n    let selector_value = element.selector();\n\n    for (let element2 of relation_collection.array()) {\n      if (selector_value === element2.fields[has_many_field_key]) {\n        element2_arr.push(element2);\n        if (limit_to_one) {\n          return element2_arr;\n        }\n      }\n    }\n\n    return element2_arr;\n  }\n\n  function getPolymorphicHasManyRelationArray(element: Element, relation_collection: Collection, has_many_field_key: string, has_many_collection_field_key: string, limit_to_one?: boolean): Element[] {\n    let element2_arr: Element[] = [];\n    let selector_value = element.selector();\n    let collection_name = element.collection().name;\n\n    for (let element2 of relation_collection.array()) {\n      if (selector_value === element2.fields[has_many_field_key] && collection_name === element2.fields[has_many_collection_field_key]) {\n        element2_arr.push(element2);\n        if (limit_to_one) {\n          return element2_arr;\n        }\n      }\n    }\n\n    return element2_arr;\n  }\n\n  function getHasManyRelationArrayInline(element: Element, relation_collection: Collection, field_key: string): Element[] {\n    let selector_value_arr = element.fields[field_key];\n    if (!Array.isArray(selector_value_arr)) { throw new ElpongError('fldnrf', field_key); }\n    let element2_arr: Element[] = [];\n    for (let element2 of relation_collection.array()) {\n      if (Util.includes(selector_value_arr, element2.selector())) { element2_arr.push(element2); }\n    }\n    return element2_arr;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/Element/Relations/HasMany.ts","import { Element } from '../Element';\nimport { Util } from '../Util';\n\nexport namespace ElementHelper {\n  export function toData(element: Element, full_duplicate?: boolean) {\n    let collection = element.collection();\n    let scheme = collection.scheme();\n    let o = {};\n    let object = scheme.configuration().collections[collection.name].fields;\n    for (let field_key in object) {\n      let field_settings = object[field_key];\n      if (field_settings.no_send || field_settings.embedded_collection || field_settings.embedded_element) {\n        continue;\n      }\n      let field_value = element.fields[field_key];\n      if (full_duplicate && (typeof field_value === 'object')) {\n        o[field_key] = Util.copyJSON(field_value);\n      } else {\n        o[field_key] = field_value;\n      }\n    }\n    return o;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/ElementHelper.ts","import { Elpong } from './Elpong';\nimport { Scheme } from './Scheme';\nimport { PreElement } from './PreElement';\nimport { CollectionHelper } from './Helpers';\nimport { Element, SelectorValue } from './Element';\nimport { Util } from './Util';\nimport { ActionConfiguration, CollectionConfiguration } from './Configuration';\nimport { Actions, CollectionActionOptions } from './Helpers/Collection/Actions';\nimport { AjaxPromise } from './Ajax';\nimport { ElpongError } from './Errors';\n\ninterface ElementMap {\n  [key: string]: Element;\n}\n\ntype CollectionActionFunction = (action_options?: CollectionActionOptions) => AjaxPromise;\ntype GetOneCollectionActionFunction = (selector_value: SelectorValue, action_options?: CollectionActionOptions) => AjaxPromise;\n\ninterface CollectionActions {\n  getAll: CollectionActionFunction;\n  getOne: GetOneCollectionActionFunction;\n  [action_name: string]: CollectionActionFunction;\n}\n\ninterface CollectionArrayOptions {\n  no_new?: boolean;\n}\n\nexport interface CollectionFindByOptions extends CollectionArrayOptions {\n  multiple?: boolean;\n}\n\ninterface FieldsKeyValueMap {\n  [key: string]: any;\n}\n\nexport class Collection {\n  readonly _scheme: Scheme;\n  readonly name: string;\n  private readonly default_pre_element: PreElement;\n  readonly elements: ElementMap;\n  readonly new_elements: Element[];\n  readonly actions: CollectionActions;\n\n  constructor(scheme: Scheme, name: string) {\n    this._scheme = scheme;\n    this.name = name;\n    this.elements = {};\n    this.new_elements = [];\n    this.default_pre_element = {};\n\n    let config = CollectionHelper.getConfiguration(this);\n\n    for (let field_key in config.fields) {\n      let field_config = config.fields[field_key];\n\n      if (field_config.default) {\n        this.default_pre_element[field_key] = field_config.default;\n      }\n    }\n\n    // for collection_action_name, collection_action_settings of settings.collection_actions\n    //   @actions[HP.Util.camelize(collection_action_name)] = ->\n    //     # collection_action_options = {method: collection_action_settings.method.toUpperCase(), }\n    //     # new_options = HP.Util.merge(HP.Util.merge({method: 'GET'}, {meth}), options)\n    //     # HPP.http_function(new_options)\n\n    this.actions = {\n      getAll: (action_options?: CollectionActionOptions) => {\n        return Actions.executeGetAll(this, action_options);\n      },\n      getOne: (selector_value: SelectorValue, action_options?: CollectionActionOptions) => {\n        return Actions.executeGetOne(this, selector_value, action_options);\n      }\n    };\n\n    Util.forEach(config.collection_actions, (action_config: ActionConfiguration, action_name: string) => {\n      this.actions[Util.camelize(action_name)] = (action_options: CollectionActionOptions) =>\n        Actions.executeCustom(this, action_name, action_config, action_options);\n    });\n  }\n\n  scheme(): Scheme {\n    return this._scheme;\n  }\n\n  load(ignore_empty: boolean): void {\n    if (typeof document === 'undefined') return\n\n    let collection_tags: NodeListOf<HTMLMetaElement> =\n      document.querySelectorAll(`meta[name=elpong-collection][collection='${this.name}'][scheme='${this.scheme().name}']`) as NodeListOf<HTMLMetaElement>;\n    let element_tags: NodeListOf<HTMLMetaElement> =\n      document.querySelectorAll(`meta[name=elpong-element][collection='${this.name}'][scheme='${this.scheme().name}']`) as NodeListOf<HTMLMetaElement>;\n\n    if (!ignore_empty && !collection_tags.length && !element_tags.length) {\n      throw new ElpongError('elpnce');\n    }\n\n    for (let collection_tag of Util.arrayFromHTML(collection_tags) as HTMLMetaElement[]) {\n      for (let pre_element of JSON.parse(collection_tag.content) as PreElement[]) {\n        this.buildOrMerge(pre_element);\n      }\n    }\n    Util.arrayFromHTML(element_tags).map((element_tag: HTMLMetaElement) =>\n      this.buildOrMerge(JSON.parse(element_tag.content)));\n  }\n\n  configuration(): CollectionConfiguration {\n    return CollectionHelper.getConfiguration(this);\n  }\n\n  // Get an array of all elements\n  //\n  // @return {Element[]} Array of elements\n  array(options?: CollectionArrayOptions): Element[] {\n    if (!options) { options = {no_new: false}; }\n    let arr = options.no_new ? [] : this.new_elements;\n    return arr.concat(Util.values(this.elements));\n  }\n\n  find(selector_value: SelectorValue): Element|null {\n    return this.elements[selector_value] || null;\n  }\n\n  findBy(fields_key_value_map: FieldsKeyValueMap, find_options: CollectionFindByOptions): Element|Element[]|null {\n    if (!find_options) { find_options = {}; }\n\n    let is_correct;\n    let arr = this.array(find_options);\n    let response_arr: Element[] = [];\n\n    for (let element of arr) {\n      is_correct = true;\n      for (let field_key in fields_key_value_map) {\n        let field_value = fields_key_value_map[field_key];\n        if (element.fields[field_key] !== field_value) {\n          is_correct = false;\n          break;\n        }\n      }\n      if (is_correct) {\n        if (find_options.multiple) {\n          response_arr.push(element);\n        } else {\n          return element;\n        }\n      }\n    }\n    if (find_options.multiple) {\n      return response_arr;\n    } else {\n      return null;\n    }\n  }\n\n  build(pre_element: PreElement): Element {\n    if (!pre_element) { pre_element = this.default_pre_element; }\n    let el = new Element(this, pre_element);\n    CollectionHelper.addElement(this, el);\n    return el;\n  }\n\n  buildOrMerge(pre_element: PreElement): Element {\n    let sv;\n    if (sv = pre_element[this.scheme().configuration().selector]) {\n      let el;\n      if (el = this.find(sv)) {\n        return el.merge(pre_element);\n      } else {\n        return this.build(pre_element);\n      }\n    } else {\n      return this.build(pre_element);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Collection.ts","import { ElpongError } from './Errors'\n\ndeclare var DEBUG: boolean;\nif (typeof DEBUG === 'undefined') {\n  var DEBUG = true;\n}\n\nexport class SchemeConfiguration {\n  readonly name: string;\n  readonly singular: string;\n  readonly selector: string;\n  readonly collections: CollectionConfigurationMap;\n\n  constructor(preconf: any) {\n    this.name = preconf.name;\n    if (DEBUG && !this.name) {\n      throw new ElpongError('confnn');\n    }\n    this.selector = preconf.selector;\n    if (DEBUG && !this.selector) {\n      throw new ElpongError('confns', preconf.name);\n    }\n    this.collections = {};\n\n    for (let collection_name in preconf.collections) {\n      let collection_preconf = preconf.collections[collection_name];\n\n      let collection_configuration: CollectionConfiguration = this.collections[collection_name] = {\n        singular: collection_preconf.singular || collection_name.slice(0, -1)\n      } as CollectionConfiguration;\n\n      let props = ['fields', 'relations', 'actions', 'collection_actions'];\n      let relation_types = ['has_many', 'has_one', 'belongs_to'];\n\n      for (let prop of props) {\n        collection_configuration[prop] = collection_preconf[prop] || {};\n      }\n      let relations_conf;\n      if (relations_conf = collection_preconf.relations) {\n        for (let relation_type of relation_types) {\n          relations_conf[relation_type] = collection_preconf.relations[relation_type] || {};\n        }\n      }\n    }\n  }\n}\nexport interface CollectionConfigurationMap {\n  [name: string]: CollectionConfiguration;\n}\nexport interface CollectionConfiguration {\n  readonly singular: string\n  readonly fields: FieldConfigurationMap;\n  readonly relations: RelationConfigurationMaps;\n  readonly actions: ActionConfigurationMap;\n  readonly collection_actions: CollectionActionConfigurationMap;\n}\nexport interface FieldConfigurationMap {\n  readonly [name: string]: FieldConfiguration;\n}\nexport interface FieldConfiguration {\n  readonly reference: boolean;\n  readonly default: any;\n  readonly embedded_element: boolean;\n  readonly embedded_collection: boolean;\n  readonly no_send: boolean;\n}\nexport interface EmbeddedElementFieldConfiguration extends FieldConfiguration {\n  readonly field: string;\n  readonly collection: string;\n}\nexport interface EmbeddedCollectionFieldConfiguration extends FieldConfiguration {\n  readonly collection: string;\n}\nexport interface RelationConfigurationMaps {\n  readonly has_many: HasManyRelationConfigurationMap;\n  readonly has_one: HasOneRelationConfigurationMap;\n  readonly belongs_to: BelongsToRelationConfigurationMap;\n}\nexport interface HasManyRelationConfigurationMap {\n  readonly [name: string]: HasManyRelationConfiguration;\n}\nexport interface HasOneRelationConfigurationMap {\n  readonly [name: string]: HasOneRelationConfiguration;\n}\nexport interface BelongsToRelationConfigurationMap {\n  readonly [name: string]: BelongsToRelationConfiguration;\n}\nexport interface RelationConfiguration {\n\n}\nexport interface HasManyRelationConfiguration extends RelationConfiguration {\n  readonly field: string;\n  readonly collection: string;\n  readonly references_field: string;\n  // Polymorphism\n  readonly polymorphic: boolean;\n  readonly as: string; // block\n  // Inline\n  readonly inline: boolean;\n  readonly inline_field: string;\n}\nexport interface HasOneRelationConfiguration extends RelationConfiguration {\n  readonly field: string;\n  readonly collection: string;\n  readonly references_field: string;\n  // Polymorphism\n  readonly polymorphic: boolean;\n  readonly as: string; // block\n}\nexport interface BelongsToRelationConfiguration extends RelationConfiguration {\n  readonly collection: string;\n  // Polymorphism\n  readonly polymorphic: boolean;\n  readonly field: string; // block_id\n  readonly collection_field: string; // block_collection\n}\nexport interface ActionConfigurationMap {\n  readonly [name: string]: ActionConfiguration;\n}\nexport interface CollectionActionConfigurationMap {\n  readonly [name: string]: CollectionActionConfiguration;\n}\nexport interface CollectionActionConfiguration {\n  readonly method: string;\n  readonly path: string;\n}\nexport interface ActionConfiguration {\n  readonly method: string;\n  readonly returns_other: boolean;\n  readonly no_data: boolean;\n  readonly no_selector: boolean;\n  readonly path: string;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Configuration.ts","import { Collection } from '../../Collection';\nimport { Ajax, AjaxResponse, AjaxData, AjaxHeaders } from '../../Ajax';\nimport { UrlHelper, UrlOptions } from '../UrlHelper';\nimport { SelectorValue } from '../../Element';\nimport { CollectionActionConfiguration } from '../../Configuration';\nimport { PreElement } from '../../PreElement';\nimport { ElpongError } from '../../Errors';\n\nexport interface CollectionActionOptions {\n  data?: AjaxData;\n  headers?: AjaxHeaders;\n}\n\nexport namespace Actions {\n  export function executeGetAll(collection: Collection, action_options?: CollectionActionOptions) {\n    if (!action_options) { action_options = {}; }\n    let data = action_options.data;\n\n    let promise = Ajax.executeRequest(\n      UrlHelper.createForCollection('GET', collection, action_options as UrlOptions),\n      'GET',\n      data,\n      action_options.headers\n    );\n    promise.then((response: AjaxResponse) => {\n      response.data.map((pre_element: PreElement) => {\n        collection.buildOrMerge(pre_element);\n      });\n    });\n    return promise;\n  }\n\n  export function executeGetOne(collection: Collection, selector_value: SelectorValue, action_options?: CollectionActionOptions) {\n    if (!action_options) { action_options = {}; }\n    let data = action_options.data;\n\n    let promise = Ajax.executeRequest(\n      UrlHelper.createForCollection('GET', collection, {suffix: selector_value as string}),\n      'GET',\n      data,\n      action_options.headers\n    );\n    promise.then((response: AjaxResponse) => {\n      if (response.data) {\n        let selector_key = collection.scheme().configuration().selector;\n        if (response.data[selector_key] !== selector_value) {\n          throw new ElpongError('elesnm', `${response.data[selector_key]} != ${selector_value}`)\n        }\n        collection.buildOrMerge(response.data);\n      }\n    });\n    return promise;\n  }\n\n  export function executeCustom(collection: Collection, action_name: string, action_config: CollectionActionConfiguration, action_options?: CollectionActionOptions) {\n    if (!action_options) { action_options = {}; }\n    let data = action_options.data;\n\n    let method = action_config.method.toUpperCase();\n\n    return Ajax.executeRequest(\n      UrlHelper.createForCollection('GET', collection, {suffix: action_config.path || action_name}),\n      method,\n      data,\n      action_options.headers\n    );\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/Collection/Actions.ts","import { Ajax, AjaxResponse, AjaxData, AjaxHeaders } from '../../Ajax';\nimport { ActionConfigurationMap, ActionConfiguration } from '../../Configuration';\nimport { Element, SelectorValue } from '../../Element';\nimport { Util } from '../../Util';\nimport { ElpongError } from '../../Errors';\nimport { ElementHelper } from '../ElementHelper';\nimport { UrlHelper, UrlOptions } from '../UrlHelper';\n\nexport interface ActionOptions {\n  data?: AjaxData;\n  headers?: AjaxHeaders;\n}\n\nexport namespace Actions {\n  export function setup(element: Element, actions_config: ActionConfigurationMap) {\n    for (let method of ['get', 'post', 'put', 'delete']) {\n      element.actions[method] = (action_options: ActionOptions) => {\n        return execute(element, method.toUpperCase(), action_options);\n      }\n    }\n\n    Util.forEach(actions_config, (action_config: ActionConfiguration, action_name: string) => {\n      element.actions[Util.camelize(action_name)] = (action_options: ActionOptions) => {\n        if (element.isNew() && !action_config.no_selector) { throw new ElpongError('elenew'); }\n        return executeCustom(element, action_name, action_config, action_options);\n      }\n    });\n  }\n\n  export function execute(element: Element, method: string, action_options?: ActionOptions) {\n    if (!action_options) { action_options = {}; }\n\n    element.snapshots.make(`before_${method.toLowerCase()}`);\n\n    let data;\n    if (data = action_options.data) {\n      data = action_options.data;\n    } else if (method !== 'GET') {\n      data = ElementHelper.toData(element);\n    }\n\n    if (method === 'POST') {\n      if (!element.isNew()) { throw new Error('Element is not new'); }\n    } else {\n      if (element.isNew()) { throw new Error('Element is new'); }\n    }\n\n    let promise = Ajax.executeRequest(\n      UrlHelper.createForElement(method, {} as ActionConfiguration, element, action_options as UrlOptions, method === 'POST'),\n      method,\n      data,\n      action_options.headers\n    );\n    promise.then((response: AjaxResponse): void => {\n      if (response.data) {\n        element.merge(response.data);\n      }\n      element.snapshots.make(`after_${method.toLowerCase()}`);\n\n      let collection = element.collection();\n\n      if (Util.includes(collection.new_elements, element)) {\n        Util.removeFromArray(collection.new_elements, element);\n        collection.elements[element.selector() as SelectorValue] = element;\n      }\n    });\n\n    return promise;\n  }\n\n  export function executeCustom(element: Element, action_name: string, action_config: ActionConfiguration, action_options?: ActionOptions) {\n    if (!action_options) { action_options = {}; }\n\n    let method = action_config.method.toUpperCase();\n    element.snapshots.make(`before_${action_name}`);\n\n    let data;\n    if (action_options.data) {\n      data = action_options.data;\n    } else if (!action_config.no_data) {\n      data = ElementHelper.toData(element);\n    }\n\n    let promise = Ajax.executeRequest(\n      UrlHelper.createForElement(action_name, action_config, element, action_options),\n      method,\n      data,\n      action_options.headers\n    );\n    promise.then((response: AjaxResponse) => {\n      let selector_value;\n      if (!action_config.returns_other) {\n        if (response.data) {\n          element.merge(response.data);\n        }\n        element.snapshots.make(`after_${method.toLowerCase()}`);\n      }\n\n      let collection = element.collection();\n\n      if ((selector_value = element.selector()) && Util.includes(collection.new_elements, element)) {\n        Util.removeFromArray(collection.new_elements, element);\n        return collection.elements[selector_value] = element;\n      }\n    });\n\n    return promise;\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/Element/Actions.ts","import { Element } from '../../Element';\nimport { Util } from '../../Util';\n// import { SchemeHelper } from '../SchemeHelper';\nimport { FieldConfigurationMap, FieldConfiguration, EmbeddedElementFieldConfiguration, EmbeddedCollectionFieldConfiguration } from '../../Configuration';\nimport { PreElement } from '../../PreElement';\n// import { CollectionHelper } from '../CollectionHelper';\nimport { Collection } from '../../Collection';\n// import { Scheme } from '../../Scheme';\n// import { ElpongError } from '../../Errors';\nimport { EmbeddedElement } from './Fields/EmbeddedElement';\nimport { EmbeddedCollection } from './Fields/EmbeddedCollection';\n\nexport namespace Fields {\n  export function setup(element: Element, fields_config_map: FieldConfigurationMap, pre_element: PreElement): void {\n    Util.forEach(fields_config_map, (field_config: FieldConfiguration, field_key: string) => {\n      if (field_config.embedded_element) {\n        EmbeddedElement.handle(element, pre_element, field_key, field_config as EmbeddedElementFieldConfiguration);\n      } else if (field_config.embedded_collection) {\n        EmbeddedCollection.handle(element, pre_element, field_key, field_config as EmbeddedCollectionFieldConfiguration);\n      } else {\n        if (!pre_element.hasOwnProperty(field_key)) { return; }\n        let field_value = pre_element[field_key];\n        element.fields[field_key] = field_value;\n      }\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/Element/Fields.ts","import { Util } from '../../Util';\nimport { HasMany } from './Relations/HasMany';\nimport { HasOne } from './Relations/HasOne';\nimport { Element } from '../../Element';\nimport { RelationConfigurationMaps, HasManyRelationConfiguration, HasOneRelationConfiguration, BelongsToRelationConfiguration } from '../../Configuration';\nimport { BelongsTo } from './Relations/BelongsTo';\n\nexport namespace Relations {\n  export function setup(element: Element, relations_config_maps: RelationConfigurationMaps) {\n    Util.forEach(relations_config_maps.has_many, (relation_config: HasManyRelationConfiguration, relation_collection_name: string) => {\n      HasMany.setup(element, relation_collection_name, relation_config);\n    });\n\n    Util.forEach(relations_config_maps.has_one, (relation_config: HasOneRelationConfiguration, relation_collection_singular_name: string) => {\n      HasOne.setup(element, relation_collection_singular_name, relation_config);\n    });\n\n    Util.forEach(relations_config_maps.belongs_to, (relation_config: BelongsToRelationConfiguration, relation_collection_singular_name: string) => {\n      BelongsTo.setup(element, relation_collection_singular_name, relation_config);\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/Element/Relations.ts","import { Element, SelectorValue, isSelectorValue } from '../../../Element';\nimport { Collection } from '../../../Collection';\nimport { Util } from '../../../Util';\nimport { BelongsToRelationConfiguration } from '../../../Configuration';\nimport { SchemeHelper } from '../../SchemeHelper';\n\nexport namespace BelongsTo {\n  export function setup(element: Element, relation_collection_singular_name: string, relation_config: BelongsToRelationConfiguration) {\n    let field_key: string;\n    let relation_collection: Collection;\n    let collection = element.collection();\n\n    // TODO should be reference\n    if (relation_config.polymorphic) {\n      let collection_field_key = relation_config.collection_field ||  `${relation_collection_singular_name}_collection`;\n      field_key = relation_config.field;\n      element.relations[Util.camelize(relation_collection_singular_name)] = () =>\n        getPolymorphicBelongsToElement(element, field_key, collection_field_key, relation_collection_singular_name);\n    } else { // normal\n      let scheme = collection.scheme();\n      if (relation_config.collection) {\n        relation_collection = collection.scheme().select(relation_config.collection);\n      } else {\n        relation_collection = SchemeHelper.getCollectionBySingularName(scheme, relation_collection_singular_name);\n      }\n      field_key = relation_config.field || `${relation_collection_singular_name}_${scheme.configuration().selector}`;\n      element.relations[Util.camelize(relation_collection_singular_name)] = () =>\n        getBelongsToElement(element, relation_collection, field_key);\n    }\n  }\n\n  let getBelongsToElement = (element: Element, relation_collection: Collection, field_key: string): Element|null|undefined => {\n    let selector_value: SelectorValue = element.fields[field_key];\n    if (isSelectorValue(selector_value)) {\n      return relation_collection.find(selector_value) || null;\n    } else {\n      return undefined;\n    }\n  }\n\n  // Gets the polymorphic belongs_to element\n  //\n  // @param {Element} hpe              The element to which the other element belongs\n  // @param {string} field_key                The foreign key, e.g. parent_id.\n  // @param {string} collection_field_key     The field name of the other collection, required, e.g. parent_collection.\n  // @param {string} collection_selector_field The selector name of the other collection, if it was specified, e.g. id. (Will not be looked at if field_key is present)\n  // @param {string} collection_singular_name  e.g. parent\n  //\n  // @return {Element|null}            The related element.\n  let getPolymorphicBelongsToElement = (element: Element, field_key: string, collection_field_key: string, collection_singular_name: string) => {\n    let relation_collection_name = element.fields[collection_field_key];\n    let relation_collection = element.collection().scheme().select(relation_collection_name);\n    if (!field_key) {\n      let selector_key = element.collection().scheme().configuration().selector;\n      field_key = `${collection_singular_name}_${selector_key}`;\n    }\n    let selector_value = element.fields[field_key];\n    return relation_collection.find(selector_value) || null;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/Element/Relations/BelongsTo.ts","import { Element } from '../../../Element';\nimport { Collection } from '../../../Collection';\nimport { HasMany } from './HasMany';\nimport { HasOneRelationConfiguration } from '../../../Configuration';\nimport { SchemeHelper } from '../../SchemeHelper';\nimport { Util } from '../../../Util';\n\nexport namespace HasOne {\n  export function setup(element: Element, relation_collection_singular_name: string, relation_config: HasOneRelationConfiguration) {\n    let relation_collection: Collection;\n    let collection = element.collection();\n    let collection_config = element.collection().configuration();\n\n    let scheme = collection.scheme();\n\n    if (relation_config.collection) {\n      relation_collection = scheme.select(relation_config.collection);\n    } else {\n      relation_collection = SchemeHelper.getCollectionBySingularName(scheme, relation_collection_singular_name);\n    }\n\n    return element.relations[Util.camelize(relation_collection_singular_name)] = () =>\n      HasMany.getHasManyRelationFunction(element, collection, relation_config, relation_collection, true)()[0];\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/Element/Relations/HasOne.ts","import { Util } from '../../Util';\nimport { Snapshot } from '../../Snapshot';\nimport { Element } from '../../Element';\nimport { ElementHelper } from '../ElementHelper';\nimport { ElpongError } from '../../Errors';\n\nexport namespace Snapshots {\n  export function setup(element: Element) {\n    let snapshots = element.snapshots;\n\n    snapshots.list = [];\n\n    snapshots.make = (tag?: string): Snapshot => {\n      return new Snapshot(element, tag);\n    }\n\n    snapshots.lastPersisted = (): Snapshot|undefined => {\n      if (element.isNew()) { return; }\n\n      for (let i = snapshots.list.length - 1; i >= 0 ; i--) {\n        let snapshot = snapshots.list[i];\n        if (Util.includes(['after_post', 'after_put', 'after_get', 'creation'], snapshot.tag)) {\n          return snapshot;\n        }\n      }\n\n      // Util.reverseForEach(element.snapshots.list, function(k: string, v: Snapshot) {\n      //   if ((v.tag === 'after_post') || (v.tag === 'after_put') || (v.tag === 'after_get') || (v.tag === 'creation')) {\n      //     last_persisted_snapshot = v;\n      //     return Util.BREAK;\n      //   }\n      // });\n\n      // return last_persisted_snapshot;\n    }\n\n    snapshots.lastWithTag = (tag: string|RegExp): Snapshot|undefined => {\n      let last_snapshot_with_tag: Snapshot|undefined;\n      let list = element.snapshots.list;\n      if (Util.isRegExp(tag)) {\n        for (let i = list.length - 1; i >= 0 ; i--) {\n          let snapshot = list[i];\n          if (snapshot.tag) {\n            if (tag.test(snapshot.tag)) {\n              return snapshot;\n            }\n          }\n        }\n      } else {\n        for (let i = list.length - 1; i >= 0 ; i--) {\n          let snapshot = list[i];\n          if (tag === snapshot.tag) {\n            return snapshot;\n          }\n        }\n      }\n      return last_snapshot_with_tag;\n    }\n\n    snapshots.last = (): Snapshot => {\n      let list = element.snapshots.list;\n      return list[list.length - 1];\n    }\n\n    snapshots.undo = (id?: number|string|RegExp): Element => {\n      if (id == null) { id = 0; }\n      if (Util.isInteger(id)) {\n        let list = element.snapshots.list;\n        if (id < 0 || id > list.length) {\n          throw new ElpongError('elesti', `${id}`);\n        } else {\n          let snapshot = list[element.snapshots.current_index - id];\n          snapshot.revert();\n        }\n      } else {\n        let snapshot;\n        if (snapshot = snapshots.lastWithTag(id)) {\n          snapshot.revert();\n        } else {\n          throw new ElpongError('elesnf', `${id}`);\n        }\n      }\n      return element;\n    }\n\n    snapshots.isPersisted = () => {\n      let snapshot = snapshots.lastPersisted();\n      if (!snapshot) { return false; }\n      return Util.equalsJSON(element.fields, snapshot.data);\n    }\n  }\n}\n\n// import Element from '../../Element';\n//\n// const setupSnapshots = (element: Element) => {\n//   element.snapshots = {\n//     getLastPersisted() {\n//       if (element.isNew()) { return null; }\n//       let last_persisted_snapshot = null;\n//       Util.reverseForEach(hpe.snapshots.list, function(k, v) {\n//         if ((v.tag === 'after_post') || (v.tag === 'after_put') || (v.tag === 'after_get') || (v.tag === 'creation')) {\n//           last_persisted_snapshot = v;\n//           return Util.BREAK;\n//         }\n//       });\n//\n//       return last_persisted_snapshot;\n//     },\n//\n//     getLastWithTag(tag) {\n//       let last_snapshot_with_tag = null;\n//       if (HP.Util.isRegex(tag)) {\n//         HP.Util.reverseForEach(hpe.snapshots.list, function(k, v) {\n//           if (tag.test(v.tag)) {\n//             last_snapshot_with_tag = v;\n//             return HP.Util.BREAK;\n//           }\n//         });\n//       } else {\n//         HP.Util.reverseForEach(hpe.snapshots.list, function(k, v) {\n//           if (v.tag === tag) {\n//             last_snapshot_with_tag = v;\n//             return HP.Util.BREAK;\n//           }\n//         });\n//       }\n//       return last_snapshot_with_tag;\n//     },\n//\n//     getLast() {\n//       let last_snapshot = null;\n//       HP.Util.reverseForEach(hpe.snapshots.list, function(k, v) {\n//         last_snapshot = v;\n//         return HP.Util.BREAK;\n//       });\n//       return last_snapshot;\n//     },\n//\n//     make(tag) {\n//       let date = Date.now();\n//       let list = hpe.snapshots.list =\n//         HPP.Helpers.Snapshot.removeAfter(hpe.last_snapshot_time, hpe.snapshots.list);\n//       if (list[date]) {\n//         return hpe.snapshots.make(tag); // loop until 1ms has passed\n//       }\n//       let s = list[date] = {\n//         tag,\n//         time: date,\n//         data: HPP.Helpers.Element.getFields(hpe),\n//         revert() {\n//           return hpe.undo(date);\n//         }\n//       };\n//       hpe.last_snapshot_time = date;\n//       return s;\n//     },\n//\n//     list: {}\n//   };\n// }\n\n\n\n// WEBPACK FOOTER //\n// ./src/Helpers/Element/Snapshots.ts","import { Collection } from './Collection';\nimport { SchemeConfiguration } from './Configuration';\nimport { ElpongError } from './Errors';\nimport { UrlHelper } from './Helpers';\nimport { Elpong } from './Elpong';\n\ninterface CollectionMap {\n  [name: string]: Collection;\n}\n\ninterface SchemeOptions {\n  no_normalize: boolean;\n  no_create_collections: boolean;\n}\n\nfunction isSchemeConfiguration(sc: SchemeConfiguration | Object): sc is SchemeConfiguration {\n   return (sc as SchemeConfiguration) instanceof SchemeConfiguration;\n}\n\nexport class Scheme {\n  name: string;\n  private _configuration: SchemeConfiguration;\n  _collections: CollectionMap;\n  private api_url: string;\n\n  constructor(sc: SchemeConfiguration | Object) {\n    let _sc: SchemeConfiguration;\n    if (!isSchemeConfiguration(sc)) {\n      _sc = new SchemeConfiguration(sc);\n    } else {\n      _sc = sc;\n    }\n    this._configuration = _sc;\n    this.name = _sc.name;\n    this._collections = {};\n\n    // Create collections\n    for (let collection_name in _sc.collections) {\n      let collection_settings = _sc.collections[collection_name];\n      let collection = new Collection(this, collection_name);\n      this._collections[collection_name] = collection;\n    }\n\n    if (Elpong.isAutoload()) {\n      for (let collection_name in _sc.collections) {\n        this._collections[collection_name].load(true);\n      }\n    }\n  }\n\n  configuration() {\n    return this._configuration;\n  }\n\n  select(name: string) {\n    let collection;\n    if (collection = this._collections[name]) {\n      return collection;\n    } else {\n      throw new ElpongError('collnf', name);\n    }\n  }\n\n  setApiUrl(url: string) {\n    let api_url = this.api_url = UrlHelper.trimSlashes(url);\n    if (!UrlHelper.isFqdn(api_url)) {\n      return this.api_url = `/${api_url}`;\n    }\n  }\n\n  getApiUrl() {\n    return this.api_url;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Scheme.ts","import { Element } from './Element';\nimport { ElementHelper } from './Helpers/ElementHelper';\n\nexport class Snapshot {\n  public tag?: string;\n  public time: number;\n  public data: Object;\n  public element: Element;\n  public undone: boolean;\n  public index: number;\n\n  constructor(element: Element, tag?: string) {\n    this.element = element;\n    this.tag = tag;\n    this.data = ElementHelper.toData(element, true);\n    this.undone = false;\n    this.time = Date.now();\n    this.index = element.snapshots.list.length;\n    element.snapshots.list.push(this);\n    element.snapshots.current_index = this.index;\n  }\n\n  revert() {\n    let list = this.element.snapshots.list;\n    this.element.merge(this.data);\n    this.element.snapshots.current_index = this.index;\n    this.undone = false;\n    for (let i = this.index + 1, l = list.length; i < l; i++) {\n      list[i].undone = true;\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Snapshot.ts","import { Elpong } from './Elpong';\n\nexport = Elpong;\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts"],"sourceRoot":""}